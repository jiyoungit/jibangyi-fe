<script setup>
import { ref, watch } from 'vue';
import { RouterLink, useRoute } from 'vue-router';
import { storeToRefs } from 'pinia';
import { useMenuStore } from '@/stores/menu';
import { useMemberStore } from "@/stores/member";

const menuStore = useMenuStore();
const { menuList } = storeToRefs(menuStore);

const memberStore = useMemberStore();
const { userLogout } = memberStore;

const location = useRoute();

const primary = '#003456';
const secondary = '#D1F4FA';

let color = '', subcolor = '';
let isHome = true;
watch(location, () => {
  if (location.path === '/') {
    color = secondary;
    subcolor = primary;
    isHome = true;
  } else {
    color = primary;
    subcolor = secondary;
    isHome = false;
  }
});

const logout = () => {
  userLogout();
};
</script>

<template>
  <nav>
    <RouterLink :to="{ name: 'home' }">
      <svg class="logo" width="807" height="210" viewBox="0 0 807 210" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path
          d="M45.7174 123.574H10V73.2867L61.4701 43L109 73.2867V123.574H70.0895M45.7174 123.574C45.7174 123.574 48.3929 146.432 45.7174 155.766C43.0418 165.099 37.3442 168.303 24.7845 166.242C12.2248 164.182 10 152.337 10 152.337M45.7174 123.574H70.0895M70.0895 123.574C70.0895 123.574 68.8582 146.432 71.3209 155.766C73.7836 165.099 83.3881 168.719 95.2089 166.242C107.03 163.766 109 152.337 109 152.337"
          :stroke="color" stroke-width="20" />
        <path
          d="M215.695 54.1818H236.974V125.176C236.974 131.739 235.499 137.439 232.549 142.278C229.632 147.117 225.572 150.846 220.369 153.464C215.165 156.083 209.116 157.392 202.222 157.392C196.091 157.392 190.522 156.315 185.518 154.161C180.546 151.973 176.602 148.659 173.685 144.217C170.769 139.743 169.327 134.125 169.36 127.364H190.788C190.854 130.048 191.401 132.352 192.428 134.274C193.489 136.163 194.931 137.622 196.754 138.649C198.61 139.643 200.797 140.141 203.316 140.141C205.968 140.141 208.205 139.577 210.028 138.45C211.884 137.29 213.292 135.6 214.254 133.379C215.215 131.159 215.695 128.424 215.695 125.176V54.1818ZM273.219 54.1818V156H251.692V54.1818H273.219ZM287.85 156V54.1818H328.617C336.108 54.1818 342.355 55.2921 347.36 57.5128C352.365 59.7334 356.127 62.8158 358.646 66.7599C361.165 70.6709 362.424 75.1785 362.424 80.2827C362.424 84.2599 361.629 87.7566 360.038 90.7727C358.447 93.7557 356.259 96.2083 353.475 98.1307C350.724 100.02 347.576 101.362 344.029 102.158V103.152C347.907 103.318 351.536 104.411 354.917 106.433C358.331 108.455 361.098 111.289 363.22 114.935C365.341 118.547 366.401 122.856 366.401 127.861C366.401 133.263 365.059 138.086 362.374 142.328C359.723 146.537 355.795 149.868 350.592 152.321C345.388 154.774 338.975 156 331.352 156H287.85ZM309.377 138.401H326.927C332.926 138.401 337.301 137.257 340.052 134.97C342.803 132.65 344.178 129.568 344.178 125.723C344.178 122.906 343.499 120.42 342.14 118.266C340.781 116.111 338.842 114.421 336.323 113.195C333.838 111.968 330.871 111.355 327.424 111.355H309.377V138.401ZM309.377 96.7884H325.336C328.286 96.7884 330.904 96.2746 333.191 95.2472C335.511 94.1866 337.334 92.6951 338.66 90.7727C340.019 88.8504 340.698 86.5469 340.698 83.8622C340.698 80.1832 339.389 77.2169 336.771 74.9631C334.186 72.7093 330.507 71.5824 325.734 71.5824H309.377V96.7884ZM394.879 156H371.81L406.96 54.1818H434.701L469.8 156H446.732L421.228 77.4489H420.433L394.879 156ZM393.437 115.979H447.925V132.783H393.437V115.979ZM564.139 54.1818V156H545.545L501.248 91.9162H500.502V156H478.975V54.1818H497.867L541.816 118.216H542.711V54.1818H564.139ZM646.359 87.0938C645.663 84.6742 644.685 82.5365 643.426 80.6804C642.166 78.7912 640.625 77.2003 638.802 75.9077C637.012 74.5819 634.957 73.571 632.637 72.875C630.35 72.179 627.815 71.831 625.031 71.831C619.827 71.831 615.253 73.1236 611.309 75.7088C607.398 78.294 604.349 82.0559 602.161 86.9943C599.974 91.8996 598.88 97.8987 598.88 104.991C598.88 112.084 599.957 118.116 602.112 123.088C604.266 128.06 607.315 131.855 611.259 134.473C615.204 137.058 619.86 138.351 625.23 138.351C630.102 138.351 634.261 137.489 637.708 135.766C641.188 134.009 643.84 131.54 645.663 128.358C647.519 125.176 648.447 121.414 648.447 117.072L652.822 117.719H626.572V101.511H669.178V114.338C669.178 123.287 667.289 130.976 663.511 137.406C659.732 143.803 654.529 148.741 647.9 152.222C641.271 155.669 633.681 157.392 625.13 157.392C615.585 157.392 607.199 155.287 599.974 151.078C592.749 146.836 587.114 140.82 583.071 133.031C579.06 125.209 577.055 115.929 577.055 105.19C577.055 96.9375 578.248 89.5795 580.634 83.1165C583.054 76.6203 586.435 71.1184 590.776 66.6108C595.118 62.1032 600.173 58.6728 605.94 56.3196C611.707 53.9664 617.955 52.7898 624.683 52.7898C630.45 52.7898 635.819 53.6349 640.791 55.3253C645.762 56.9825 650.17 59.3357 654.015 62.3849C657.893 65.4342 661.058 69.0634 663.511 73.2727C665.964 77.4489 667.538 82.0559 668.234 87.0938H646.359Z"
          :fill="color" />
        <path
          d="M672.201 54.1818H696.313L719.531 98.0312H720.525L743.742 54.1818H767.855L730.717 120.006V156H709.339V120.006L672.201 54.1818ZM798.059 54.1818V156H776.532V54.1818H798.059Z"
          :fill="subcolor" />
      </svg>


    </RouterLink>

    <div class="menuwrap">
      <RouterLink :to="{ name: 'deal' }"><span :class="['menu', isHome ? 'home' : '']">집구하기</span></RouterLink>
      <RouterLink :to="{ name: 'compare' }"><span :class="['menu', isHome ? 'home' : '']">매물 비교</span></RouterLink>
      <RouterLink :to="{ name: 'qna' }"><span :class="['menu', isHome ? 'home' : '']">Q&A 게시판</span></RouterLink>
      <template v-for="m in menuList">
        <template v-if="m.show">
          <template v-if="m.routeName === 'logout'">
            <RouterLink to="/" @click.prevent="logout"><v-btn :class="['menu', isHome ? 'home' : '', 'loginBtn']">{{
              m.name }}</v-btn>
            </RouterLink>
          </template>
          <template v-else>
            <RouterLink :to="{ name: m.routeName }"><v-btn :class="['menu', isHome ? 'home' : '', 'loginBtn']">{{ m.name
            }}</v-btn>
            </RouterLink>
          </template>
        </template>
      </template>
    </div>
  </nav>
</template>

<style scoped>
nav {
  z-index: 1;
  display: flex;
  flex: 0 0 auto;
  width: 100%;
  align-items: center;
  height: 80px;
  padding: 0 20px;
}

.logo {
  width: 8rem;
  padding-left: 10px;
}

.menuwrap {
  display: flex;
  flex: 0 0 auto;
  align-items: center;
  margin-left: auto;
}

.menu {
  font-size: 16px;
  line-height: 26px;
  position: relative;
  margin-left: 40px;
  color: #636363;
}

.home {
  color: #ddd;
}

a:hover {
  background-color: none;
}

.menu:hover {
  color: #000;
}

.home:hover {
  color: #fff;
}

.loginBtn {
  background-color: transparent;
  border: 1px solid #fff;
  border-radius: 10px;
}
</style>
